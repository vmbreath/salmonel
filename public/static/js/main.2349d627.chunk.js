(this["webpackJsonpsalmonel-react-app"]=this["webpackJsonpsalmonel-react-app"]||[]).push([[0],{105:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(10),s=n.n(c),r=(n(98),n(185)),l=(n(99),n(171)),o=n(174),d=n(177),h=n(181),j=n(180),g=n(176),b=n(178),u=n(192),O=n(179),p=n(17),x=n(43);const A=e=>{try{const t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(t){return}},f=(e,t)=>{try{const n=JSON.stringify(e);localStorage.setItem(t,n)}catch(n){throw new Error("Can't save changes in local storage")}},m=A("reducer"),y=m?m.state:{data:["first-load"],oAntigenVariants:[],h1AntigenVariants:[],h2AntigenVariants:[],queryFilter:{find:{OAntigen:[],H1Antigen:[],H2Antigen:[]},exclude:{OAntigen:[],H1Antigen:[],H2Antigen:[]}}},F=Object(x.b)({name:"search",initialState:y,reducers:{setNewData:(e,t)=>{e.data=t.payload,t.payload.forEach((t=>{const n=t.o_antigen,a=t.h_antigen1,i=t.h_antigen2,c=(e,t)=>{const n=(e=>"["===e[0]||"{"===e[0]||"("===e[0]?"]"===e[e.length-1]||"}"===e[e.length-1]||")"===e[e.length-1]?e.slice(1,-1):e.slice(1):"]"===e[e.length-1]||"}"===e[e.length-1]||")"===e[e.length-1]?e.slice(0,-1):e)(e);if(n.includes(","))n.split(",").forEach((e=>{t.find((t=>t[0]===e))||t.push([e,"white"])}));else{t.find((e=>e[0]===n))||t.push([n,"white"])}};n.forEach((t=>{c(t,e.oAntigenVariants)})),a.forEach((t=>{c(t,e.h1AntigenVariants)})),i.forEach((t=>{c(t,e.h2AntigenVariants)}))})),e.oAntigenVariants=e.oAntigenVariants.sort(((e,t)=>{let n=e[0],a=t[0];return n.includes("!")&&(n=n.slice(0,n.length-1)),a.includes("!")&&(a=a.slice(0,a.length-1)),n.includes("Vi")&&(n=99999),a.includes("Vi")&&(a=99999),n-a})),e.h1AntigenVariants=e.h1AntigenVariants.sort(),e.h2AntigenVariants=e.h2AntigenVariants.sort()},updateNewData:(e,t)=>{e.data=t.payload,console.log(e.data)},updateOAntigenVariants:(e,t)=>{const n=e.oAntigenVariants[t.payload];if("white"===n[1])n[1]="#AAFFB3",e.queryFilter.find.OAntigen.push(n[0]);else if("#AAFFB3"===n[1]){n[1]="#FFAFAA",e.queryFilter.exclude.OAntigen.push(n[0]);const t=e.queryFilter.find.OAntigen.indexOf(n[0]);e.queryFilter.find.OAntigen.splice(t,1)}else if("#FFAFAA"===n[1]){n[1]="white";const t=e.queryFilter.exclude.OAntigen.indexOf(n[0]);e.queryFilter.exclude.OAntigen.splice(t,1)}},updateH1AntigenVariants:(e,t)=>{const n=e.h1AntigenVariants[t.payload];if("white"===n[1])n[1]="#AAFFB3",e.queryFilter.find.H1Antigen.push(n[0]);else if("#AAFFB3"===n[1]){n[1]="#FFAFAA",e.queryFilter.exclude.H1Antigen.push(n[0]);const t=e.queryFilter.find.H1Antigen.indexOf(n[0]);e.queryFilter.find.H1Antigen.splice(t,1)}else if("#FFAFAA"===n[1]){n[1]="white";const t=e.queryFilter.exclude.H1Antigen.indexOf(n[0]);e.queryFilter.exclude.H1Antigen.splice(t,1)}},updateH2AntigenVariants:(e,t)=>{const n=e.h2AntigenVariants[t.payload];if("white"===n[1])n[1]="#AAFFB3",e.queryFilter.find.H2Antigen.push(n[0]);else if("#AAFFB3"===n[1]){n[1]="#FFAFAA",e.queryFilter.exclude.H2Antigen.push(n[0]);const t=e.queryFilter.find.H2Antigen.indexOf(n[0]);e.queryFilter.find.H2Antigen.splice(t,1)}else if("#FFAFAA"===n[1]){n[1]="white";const t=e.queryFilter.exclude.H2Antigen.indexOf(n[0]);e.queryFilter.exclude.H2Antigen.splice(t,1)}},clearQueryFilter:e=>{e.oAntigenVariants.forEach((e=>{e[1]="white"})),e.h1AntigenVariants.forEach((e=>{e[1]="white"})),e.h2AntigenVariants.forEach((e=>{e[1]="white"})),e.queryFilter={find:{OAntigen:[],H1Antigen:[],H2Antigen:[]},exclude:{OAntigen:[],H1Antigen:[],H2Antigen:[]}}}}}),{clearQueryFilter:w,updateH1AntigenVariants:H,updateH2AntigenVariants:v,setNewData:k,updateOAntigenVariants:V,updateNewData:N}=F.actions,S=e=>e.search.data,C=e=>e.search.oAntigenVariants,q=e=>e.search.h1AntigenVariants,E=e=>e.search.h2AntigenVariants,P=e=>e.search.queryFilter;var T=F.reducer;const{reducer:W,actions:B}=F;var I=n(4);const z=[{id:"allgroups",label:"\u0413\u0440\u0443\u043f\u043f\u0430",minWidth:60},{id:"serovar",label:"\u0421\u0435\u0440\u043e\u0432\u0430\u0440",minWidth:60},{id:"o_antigen",label:"\u0421\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u041e \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b",minWidth:40},{id:"h_antigen1",label:"\u0421\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 H \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b (\u0424\u0430\u0437\u0430 1)",minWidth:40},{id:"h_antigen2",label:"\u0421\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 H \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b (\u0424\u0430\u0437\u0430 2)",minWidth:40}],D=Object(l.a)({root:{maxWidth:690,marginLeft:"auto",marginRight:"auto"},container:{maxHeight:"70vh"}});function J(){const e=Object(p.b)(),t=Object(p.c)(S),n=D(),[c,s]=i.a.useState(0),[r,l]=i.a.useState(15);let x=Object(p.c)(P);Object(a.useEffect)((()=>{"first-load"===t[0]&&A().then((t=>{e(k(t))}))}),[]),Object(a.useEffect)((async()=>{const t=new URL("https://salmonel.onrender.com/filter"),n=[["filter",JSON.stringify(x)]];t.search=new URLSearchParams(n).toString();let a=await fetch(t),i=await a.json();e(N(i)),s(0)}),[x]);const A=async()=>{let e=await fetch("https://salmonel.onrender.com/test"),t=await e.json();return await t};return Object(I.jsxs)(o.a,{className:n.root,children:[Object(I.jsx)(g.a,{className:n.container,children:Object(I.jsxs)(d.a,{size:"small",stickyHeader:!0,"aria-label":"sticky table",children:[Object(I.jsx)(b.a,{children:Object(I.jsx)(O.a,{style:{height:33},children:z.map((e=>Object(I.jsx)(j.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)))})}),Object(I.jsx)(h.a,{children:t.slice(c*r,c*r+r).map((e=>Object(I.jsx)(O.a,{hover:!0,role:"checkbox",tabIndex:-1,children:z.map((t=>{let n=e[t.id];return Array.isArray(n)&&(n=n.join(", ")),Object(I.jsx)(j.a,{align:t.align,children:t.format&&"number"===typeof n?t.format(n):n},t.id)}))},e.code)))})]})}),Object(I.jsx)(u.a,{rowsPerPageOptions:[15,50,100,500],component:"div",count:t.length,rowsPerPage:r,page:c,onChangePage:(e,t)=>{s(t)},onChangeRowsPerPage:e=>{l(+e.target.value),s(0)}})]})}var L=n(194),R=n(195),_=n(189),U=n(187),M=n(188),Q=n(186);const G=A("token"),K={token:G?G.state.token:void 0,isAuthenticated:!1},X=Object(x.b)({name:"authorization",initialState:K,reducers:{setNewToken:(e,t)=>{e.token=t.payload},setIsAuthenticated:(e,t)=>{e.isAuthenticated=t.payload}}}),{setIsAuthenticated:Y,setNewToken:Z}=X.actions,$=e=>e.authorization.token,ee=e=>e.authorization.isAuthenticated;var te=X.reducer;const{reducer:ne,actions:ae}=X;function ie(){const e=Object(p.b)(),[t,n]=i.a.useState(!0),[a,c]=i.a.useState(!1),[s,l]=i.a.useState(""),o=()=>{n(!1)};return Object(I.jsxs)("div",{children:[Object(I.jsx)(r.a,{variant:"outlined",color:"primary",onClick:()=>{n(!0)},children:"Open form dialog"}),Object(I.jsxs)(R.a,{open:t,onClose:o,"aria-labelledby":"form-dialog-title",children:[Object(I.jsx)(Q.a,{id:"form-dialog-title",children:"\u0420\u0435\u0436\u0438\u043c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430"}),Object(I.jsxs)(U.a,{children:[Object(I.jsx)(M.a,{children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(I.jsx)(L.a,{autoFocus:!0,error:a,helperText:a?"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c!":"",margin:"dense",id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",fullWidth:!0,onChange:e=>{l(e.target.value)}})]}),Object(I.jsxs)(_.a,{children:[Object(I.jsx)(r.a,{onClick:o,color:"primary",children:"Cancel"}),Object(I.jsx)(r.a,{onClick:()=>{(async()=>{const t=new URL("https://salmonel.onrender.com/login");let a=await fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userName:"admin",password:s})}),i=await a.json();i&&(f({state:i},"token"),e(Z(i)),e(Y(!0)),n(!1)),console.log("result",i)})().catch((e=>{console.log("errrr",e),c(!0)}))},color:"primary",children:"Submit"})]})]})]})}var ce=n(5),se=n(190);const re=Object(l.a)((e=>({root:{},dropdown:{position:"absolute",float:"bottom",left:"1vw",width:"95vw",zIndex:5,border:"1px solid",padding:e.spacing(1),backgroundColor:e.palette.background.paper}}))),le=Object(ce.a)({root:{boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 0px",border:"1px solid",lineHeight:1.5,borderColor:"#3f51b5",fontFamily:"sans-serif"}})(r.a);function oe(e){let{data:t,name:n}=e;const a=Object(p.b)(),c=re(),[s,l]=i.a.useState(!1);return Object(I.jsx)(se.a,{onClickAway:()=>{l(!1)},children:Object(I.jsxs)("div",{className:c.root,children:[Object(I.jsx)(r.a,{style:{textTransform:"none"},variant:"contained",color:"primary",onClick:()=>{l((e=>!e))},children:n}),s?Object(I.jsx)("div",{className:c.dropdown,children:t.map(((e,t)=>Object(I.jsx)(le,{onClick:()=>(e=>{"\u041e \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b"===n?a(V(e)):"H1 \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b"===n?a(H(e)):"H2 \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b"===n&&a(v(e))})(t),color:"primary",style:{backgroundColor:e[1]},children:e[0]},e[0])))}):null]})})}var de=function(){return Object(I.jsxs)("div",{className:"admin",children:[Object(I.jsx)("h2",{children:"ADMIN"}),Object(I.jsx)("input",{onChange:async function(e){const t=new FormData,n=e.target.files;console.log("data",n[0]),t.append("table",n[0]);const a=await fetch("https://salmonel.onrender.com/uploadtable",{method:"POST",body:t});console.log(a)},type:"file",id:"image_uploads"})]})},he=n(48),je=n(14),ge=n(182),be=n(80),ue=n.n(be);n(105);function Oe(){const e=Object(p.c)(P);return Object(I.jsx)("div",{children:Object(I.jsxs)("fieldset",{children:[Object(I.jsx)("legend",{align:"left",children:"\u041f\u043e\u0438\u0441\u043a"}),Object(I.jsxs)("p",{children:[Object(I.jsx)("span",{style:{fontWeight:"bold"},children:"O:"}),Object(I.jsx)("span",{style:{color:"green"},children:e.find.OAntigen.map(((e,t)=>t>0?","+e:e))}),Object(I.jsx)("span",{style:{color:"red"},children:e.exclude.OAntigen.map(((t,n)=>n>0||e.find.OAntigen.length>0?","+t:t))}),Object(I.jsx)("span",{style:{fontWeight:"bold"},children:"    H1:"}),Object(I.jsx)("span",{style:{color:"green"},children:e.find.H1Antigen.map(((e,t)=>t>0?","+e:e))}),Object(I.jsx)("span",{style:{color:"red"},children:e.exclude.H1Antigen.map(((t,n)=>n>0||e.find.H1Antigen.length>0?","+t:t))}),Object(I.jsx)("span",{style:{fontWeight:"bold"},children:"    H2:"}),Object(I.jsx)("span",{style:{color:"green"},children:e.find.H2Antigen.map(((e,t)=>t>0?","+e:e))}),Object(I.jsx)("span",{style:{color:"red"},children:e.exclude.H2Antigen.map(((t,n)=>n>0||e.find.H2Antigen.length>0?","+t:t))})]})]})})}var pe=n.p+"static/media/admin.7c4683f0.png";var xe=function(){const e=Object(p.b)(),t=Object(p.c)($),n=Object(p.c)(ee),i=Object(p.c)(C),c=Object(p.c)(q),s=Object(p.c)(E);Object(a.useEffect)((()=>{(async()=>{const t=await l();e(Y(t))})()}),[t]);const l=async()=>{if(t&&!n){const e=new URL("https://salmonel.onrender.com/verifier");let n=await fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",token:t||"no token"},body:JSON.stringify({userName:"admin"})}),a=await n.json();return"ololo"===a.data?(console.log("result",a),!0):(console.log("result",a),!1)}};return Object(I.jsx)(he.a,{basename:"/",children:Object(I.jsxs)("div",{className:"App",children:[Object(I.jsxs)("header",{children:[Object(I.jsx)(he.b,{className:"link",to:"/search",children:Object(I.jsx)(r.a,{variant:"contained",color:"link",children:"\u041e\u041f\u0420\u0415\u0414\u0415\u041b\u0418\u0422\u042c \u0411\u0410\u041a\u0422\u0415\u0420\u0418\u0418"})}),Object(I.jsx)(he.b,{className:"link",to:"/info",children:Object(I.jsx)(r.a,{variant:"contained",color:"link",children:"\u041b\u0415\u0413\u0415\u041d\u0414\u0410"})}),Object(I.jsx)(he.b,{className:"link",to:"/contacts",children:Object(I.jsx)(r.a,{variant:"contained",color:"link",children:"\u041e\u0411\u0420\u0410\u0422\u041d\u0410\u042f \u0421\u0412\u042f\u0417\u042c"})}),Object(I.jsx)(he.b,{className:"link",to:"/admin",children:Object(I.jsx)(r.a,{variant:"contained",color:"link",children:Object(I.jsx)("img",{src:pe,alt:"\u0410\u0434\u043c\u0438\u043d"})})})]}),Object(I.jsxs)(je.c,{children:[Object(I.jsx)(je.a,{path:"/search",children:Object(I.jsxs)("div",{className:"search",children:[Object(I.jsxs)("div",{className:"filter",children:[Object(I.jsxs)("div",{className:"filterResults",children:[Object(I.jsx)(Oe,{}),Object(I.jsx)(ge.a,{onClick:()=>{e(w())},"aria-label":"delete",children:Object(I.jsx)(ue.a,{})})]}),Object(I.jsxs)("div",{className:"filterButtons",children:[Object(I.jsx)(oe,{data:i,name:"\u041e \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b"}),Object(I.jsx)(oe,{data:c,name:"H1 \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b"}),Object(I.jsx)(oe,{data:s,name:"H2 \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b"})]})]}),Object(I.jsx)(J,{})]})}),Object(I.jsx)(je.a,{path:"/admin",render:()=>n?Object(I.jsx)(de,{}):Object(I.jsx)(ie,{})}),Object(I.jsx)(je.a,{path:"/info",children:Object(I.jsx)("p",{children:"info"})}),Object(I.jsx)(je.a,{path:"/contacts",children:Object(I.jsx)("p",{children:"contacts"})}),Object(I.jsx)(je.a,{path:"/",children:Object(I.jsx)("p",{children:"main window"})})]})]})})};var Ae=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,198)).then((t=>{let{getCLS:n,getFID:a,getFCP:i,getLCP:c,getTTFB:s}=t;n(e),a(e),i(e),c(e),s(e)}))},fe=Object(x.a)({reducer:{search:T,authorization:te}}),me=n(81),ye=n.n(me);fe.subscribe(ye()((()=>{f({state:fe.getState().search},"reducer")}),1e3)),s.a.render(Object(I.jsx)(i.a.StrictMode,{children:Object(I.jsx)(p.a,{store:fe,children:Object(I.jsx)(xe,{})})}),document.getElementById("root")),Ae()},98:function(e,t,n){},99:function(e,t,n){}},[[126,1,2]]]);
//# sourceMappingURL=main.2349d627.chunk.js.map